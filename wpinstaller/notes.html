<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WP-Nginx Installer Docs</title>
    <style>
        body{font-family:monospace;max-width:900px;margin:0 auto;padding:20px;color:#333;line-height:1.5}
        h1,h2,h3{border-bottom:1px solid #ddd;padding-bottom:5px;margin-top:1.5em}
        code,pre{background:#f5f5f5;padding:2px 5px;border-radius:3px}
        pre{padding:10px;overflow-x:auto}
        table{width:100%;border-collapse:collapse;margin:1em 0}
        th,td{padding:8px;text-align:left;border-bottom:1px solid #ddd}
        th{background:#f0f0f0}
        .note{background:#e7f5ff;padding:10px;border-left:4px solid #4dabf7;margin:1em 0}
        .warning{background:#fff3bf;padding:10px;border-left:4px solid #ffd43b;margin:1em 0}
    </style>
</head>
<body>
    <h1>WP-Nginx Auto-Installer</h1>
    <p><em>Strumento per deploy automatizzato di WordPress su stack Nginx-PHP-MySQL</em></p>

    <h2>üì¶ Installazione</h2>
    <pre># 1. Clona il repository
git clone --depth 1 --filter=blob:none --sparse https://github.com/TheNizix/Scripts.git && \
cd Scripts && git sparse-checkout set wpinstaller && \
chmod +x wpinstaller/ -R && cd wpinstaller</pre>

    <div class="note">
        <strong>Ottimizzazione:</strong> Il comando usa <code>--depth 1</code> e <code>--filter=blob:none</code> per minimizzare il download.
    </div>

    <h2>‚öôÔ∏è Configurazione</h2>
    <p>Modificare <code>wp_installer.cfg</code> prima dell'esecuzione:</p>
    <pre>nano wp_installer.cfg  # Modificare almeno:
DOMAIN="tuo.dominio"       # O "localhost" per sviluppo
ADMIN_EMAIL="admin@email"  # Per certificati SSL
MYSQL_ROOT_PASS="***"      # Cambiare password di default!</pre>

    <h2>üöÄ Esecuzione</h2>
    <pre>sudo ./launcher.sh</pre>
    <p>Selezionare il tipo di SSL:</p>
    <ul>
        <li><strong>Self-Signed</strong>: Per sviluppo locale (automatico)</li>
        <li><strong>Let's Encrypt</strong>: Per produzione (richiede dominio pubblico)</li>
    </ul>

    <h2>üîß Componenti Installati</h2>
    <table>
        <tr><th>Software</th><th>Configurazione</th></tr>
        <tr><td>Nginx</td><td>Worker ottimizzati, Gzip, Headers di sicurezza</td></tr>
        <tr><td>PHP-FPM</td><td>Pool dinamico, Memory limit 256M, Opcache</td></tr>
        <tr><td>MariaDB</td><td>Hardening automatico, Utente dedicato WP</td></tr>
        <tr><td>WordPress</td><td>Ultima versione, permessi sicuri</td></tr>
    </table>

    <h2>üîí Hardening Automatico</h2>
    <ul>
        <li>Generazione chiavi di sicurezza uniche in wp-config.php</li>
        <li>Disabilitazione editor temi/plugin (<code>DISALLOW_FILE_EDIT</code>)</li>
        <li>Protezione file sensibili (.htaccess, wp-config.php)</li>
        <li>Configurazione SSL con cipher moderni (TLS 1.2/1.3)</li>
    </ul>

    <h2>‚ö° Ottimizzazioni</h2>
    <table>
        <tr><th>Tipo</th><th>Dettaglio</th></tr>
        <tr><td>Nginx</td><td>Keepalive 65s, Worker processes auto, Client max body 64M</td></tr>
        <tr><td>PHP</td><td>Max execution 300s, Upload 64M, Opcache enabled</td></tr>
        <tr><td>Database</td><td>UTF8mb4, Collation utf8mb4_unicode_ci</td></tr>
    </table>

    <h2>üõ†Ô∏è Troubleshooting</h2>
    <div class="warning">
        <strong>Errori comuni:</strong>
        <ul>
            <li><code>Porta 80 occupata</code>: Fermare altri webserver (Apache, IIS)</li>
            <li><code>PHP non esegue</code>: Verificare <code>systemctl status phpX.X-fpm</code></li>
            <li><code>Certificati invalid</code>: Per Let's Encrypt usare <code>certbot renew --dry-run</code></li>
        </ul>
    </div>

    <h2>üìö Risorse</h2>
    <ul>
        <li>Log installazione: <code>wp_install.log</code></li>
        <li>Config Nginx: <code>/etc/nginx/sites-available/wordpress</code></li>
        <li>Config PHP: <code>/etc/php/X.X/fpm/pool.d/www.conf</code></li>
    </ul>
</body>
</html>