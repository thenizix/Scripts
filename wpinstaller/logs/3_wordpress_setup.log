+ set -euo pipefail
+ trap 'echo "Error at line $LINENO"; exit 1' ERR
+++ dirname /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/3_wordpress_setup.sh
++ cd /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts
++ pwd
+ SCRIPT_DIR=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts
+ CONFIG_FILE=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../config/wp_installer.cfg
+ LOG_FILE=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs/wp_install.log
+ WP_CLI_CACHE_DIR=/var/www/.wp-cli/cache
+ source /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../config/wp_installer.cfg
++ grep -qi microsoft /proc/version
++ MYSQL_SOCKET=/run/mysqld/mysqld.sock
++ SERVICE_CMD=service
++ DOMAIN=localhost
++ WP_DIR=/var/www/html/wordpress
++ SERVER_PORT=80
++ ADMIN_EMAIL=admin@localhost
++ PHP_VERSION=8.3
++ ENV_MODE=local
++ SSL_TYPE=selfsigned
++ MYSQL_CREDS_FILE=/root/.wp_mysql_creds
++ '[' '!' -f /root/.wp_mysql_creds ']'
++ source /root/.wp_mysql_creds
+++ MYSQL_ROOT_PASS=gfsgIwYOcBvm9kljWygvvGjSTLiwOj2s
+++ MYSQL_WP_PASS=B3TMWvY8Y0CmWoSqyGGbSq1xtpV2CHWj
++ WP_DEBUG=false
++ WP_MEMORY_LIMIT=256M
++ WP_MAX_UPLOAD_SIZE=64M
+ MYSQL_WP_DB=wordpress
+ WP_URL=localhost:80
+ mkdir -p /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs
+ exec
++ tee -a /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs/wp_install.log
+ echo '=== WORDPRESS INSTALLATION STARTED ==='
=== WORDPRESS INSTALLATION STARTED ===
++ date
+ echo 'üïí Timestamp: Fri Mar 28 22:52:38 CET 2025'
üïí Timestamp: Fri Mar 28 22:52:38 CET 2025
+ check_dependency wp
+ command -v wp
+ check_dependency mysql
+ command -v mysql
+ echo 'üóÇÔ∏è Preparing WordPress directory: /var/www/html/wordpress'
üóÇÔ∏è Preparing WordPress directory: /var/www/html/wordpress
+ sudo rm -rf /var/www/html/wordpress
+ sudo mkdir -p /var/www/html/wordpress
+ sudo chown -R www-data:www-data /var/www/html/wordpress
+ sudo chmod 750 /var/www/html/wordpress
+ echo 'üîß Configuring WP-CLI cache...'
üîß Configuring WP-CLI cache...
+ sudo mkdir -p /var/www/.wp-cli/cache
+ sudo chown -R www-data:www-data /var/www/.wp-cli/cache
+ sudo chmod 755 /var/www/.wp-cli/cache
+ echo '‚¨áÔ∏è Downloading WordPress core...'
‚¨áÔ∏è Downloading WordPress core...
+ sudo -u www-data wp core download --locale=it_IT --path=/var/www/html/wordpress --force --version=latest
Cannot load Zend OPcache - it was already loaded
Downloading WordPress 6.7.2 (it_IT)...
md5 hash verified: ec44d39c60dd915311fea1d4e1e96f48
Success: WordPress downloaded.
+ echo 'üîå Configuring database connection...'
üîå Configuring database connection...
+ sudo -u www-data wp config create --path=/var/www/html/wordpress --dbname=wordpress --dbuser=wordpress --dbpass=B3TMWvY8Y0CmWoSqyGGbSq1xtpV2CHWj --dbhost=localhost --extra-php
Cannot load Zend OPcache - it was already loaded
Error: Database connection error (1045) Access denied for user 'wordpress'@'localhost' (using password: YES)
++ echo 'Error at line 65'
Error at line 65
++ exit 1
