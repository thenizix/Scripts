+ set -euo pipefail
+ trap 'echo "Error at line $LINENO"; exit 1' ERR
+++ dirname /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/1_system_setup.sh
++ cd /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts
++ pwd
+ SCRIPT_DIR=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts
+ CONFIG_FILE=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../config/wp_installer.cfg
+ LOG_FILE=/mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs/mysql_setup.log
+ MYSQL_WP_DB=wordpress
+ mkdir -p /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs
+ exec
++ tee -a /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../logs/mysql_setup.log
+ echo '=== DATABASE SETUP STARTED ==='
=== DATABASE SETUP STARTED ===
++ date
+ echo 'üïí Timestamp: Fri Mar 28 23:08:31 CET 2025'
üïí Timestamp: Fri Mar 28 23:08:31 CET 2025
+ source /mnt/c/Users/Francy/Documents/GitHub/Scripts/wpinstaller/scripts/../config/wp_installer.cfg
+++ grep -qi microsoft /proc/version
+++ echo true
++ WSL_MODE=true
+++ '[' true = true ']'
+++ echo /run/mysqld/mysqld.sock
++ MYSQL_SOCKET=/run/mysqld/mysqld.sock
+++ '[' true = true ']'
+++ echo service
++ SERVICE_CMD=service
++ DOMAIN=localhost
++ WP_DIR=/var/www/html/wordpress
++ SERVER_PORT=80
++ ADMIN_EMAIL=admin@localhost
++ PHP_VERSION=8.3
++ ENV_MODE=local
++ SSL_TYPE=selfsigned
++ WP_UID=www-data
++ WP_GID=www-data
++ MYSQL_CREDS_DIR=/root/.wp_secure
++ DIR_PERMS=750
++ FILE_PERMS=640
++ MYSQL_CREDS_FILE=/root/.wp_secure/.mysql_creds
++ '[' '!' -d /root/.wp_secure ']'
++ mkdir -p /root/.wp_secure
++ chmod 700 /root/.wp_secure
++ '[' '!' -f /root/.wp_secure/.mysql_creds ']'
+++ openssl rand -base64 32
+++ tr -dc 'a-zA-Z0-9!@#$%^&*()_+-='
+++ head -c 32
++ MYSQL_ROOT_PASS=gypBXPaO75fHtBjGHabV3UFlRK5GNwkm
+++ openssl rand -hex 3
++ MYSQL_WP_USER=wp_user_c43df6
+++ openssl rand -base64 32
+++ tr -dc 'a-zA-Z0-9!@#$%^&*()_+-='
+++ head -c 32
++ MYSQL_WP_PASS=q/ggtG//eoezyNkK7UiYmMDYIvVJV2TQ
+++ openssl rand -hex 3
++ MYSQL_WP_DB=wp_db_794c43
++ umask 177
++ cat
++ chmod 400 /root/.wp_secure/.mysql_creds
++ source /root/.wp_secure/.mysql_creds
+++ MYSQL_ROOT_PASS=gypBXPaO75fHtBjGHabV3UFlRK5GNwkm
+++ MYSQL_WP_USER=wp_user_c43df6
+++ MYSQL_WP_PASS=q/ggtG//eoezyNkK7UiYmMDYIvVJV2TQ
+++ MYSQL_WP_DB=wp_db_794c43
++ '[' -z wp_user_c43df6 ']'
++ '[' -z q/ggtG//eoezyNkK7UiYmMDYIvVJV2TQ ']'
+ REQUIRED_VARS=('MYSQL_ROOT_PASS' 'MYSQL_WP_PASS')
+ declare -a REQUIRED_VARS
+ for var in "${REQUIRED_VARS[@]}"
+ '[' -z gypBXPaO75fHtBjGHabV3UFlRK5GNwkm ']'
+ for var in "${REQUIRED_VARS[@]}"
+ '[' -z q/ggtG//eoezyNkK7UiYmMDYIvVJV2TQ ']'
+ start_mysql
+ echo 'üîß Starting MySQL service...'
üîß Starting MySQL service...
+ for attempt in {1..3}
+ sudo service mysql start
+ mysqladmin ping -uroot --silent
mysqld is alive
+ return 0
+ mysql -uroot -pgypBXPaO75fHtBjGHabV3UFlRK5GNwkm -e 'SELECT 1'
+ echo '‚ÑπÔ∏è MySQL already secured'
‚ÑπÔ∏è MySQL already secured
+ mysql -uroot -pgypBXPaO75fHtBjGHabV3UFlRK5GNwkm -e 'USE wp_db_794c43'
+ echo 'üíΩ Creating database wp_db_794c43'
üíΩ Creating database wp_db_794c43
+ mysql -uroot -pgypBXPaO75fHtBjGHabV3UFlRK5GNwkm
+ echo '‚úÖ Database setup completed successfully!'
‚úÖ Database setup completed successfully!
+ echo '=== DATABASE SETUP FINISHED ==='
=== DATABASE SETUP FINISHED ===
+ exit 0
